{% extends 'base.html' %}
{% load static %}

{% block head %}
<link rel="stylesheet" type="text/css" href="{% static 'css/show-result.css' %}">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="{% static 'scripts/base.js' %}"></script>

<script>
    $(document).ready(function(){
        hide_loading();
        showAlert(
            'Election Results',
            'rgba(201, 136, 255, 0.3)',
            'rgb(102, 0, 128)'
        );
    });
</script>
{% endblock %}

{% block main_content %}

<div class="show-result">

    {% if status %}
    <div style="
        text-align:center;
        font-size:20px;
        color:#555;
        margin-bottom:25px;
        font-weight:500;
    ">
        {{ status }}
    </div>
    {% endif %}

    {% if winner_party %}
    <div style="
        text-align:center;
        font-size:28px;
        color:#1e7e34;
        margin-bottom:30px;
        font-weight:700;
    ">
        üèÜ Election Winner Declared
        <br><br>
        <span style="font-size:22px;">
            {{ winner_party.party_name }}
        </span>
    </div>
    {% endif %}

    {% if tie_parties %}
    <div style="
        text-align:center;
        font-size:26px;
        color:#b36b00;
        margin-bottom:30px;
        font-weight:600;
    ">
        ‚öñÔ∏è Election Result: TIE
        <br><br>

        {% for party in tie_parties %}
            <div style="font-size:20px;">
                {{ party.party_name }}
            </div>
        {% endfor %}

        <br>
        <div style="font-size:16px; color:#666;">
            Re-election or official tie-break procedure is required.
        </div>
    </div>
    {% endif %}

    <table class="vote-count">
        <tr class="table-header">
            <td>Sr. No.</td>
            <td>Party Symbol</td>
            <td>Party Name</td>
            <td>Vote Count</td>
        </tr>

        {% for result in results %}
        <tr>
            <td>{{ result.sr }}</td>
            <td>
                {% if result.party_symbol %}
                    <img src="{{ result.party_symbol }}" style="width:60px;">
                {% else %}
                    ‚Äî
                {% endif %}
            </td>
            <td>{{ result.party_name }}</td>
            <td>{{ result.vote_count }}</td>
        </tr>
        {% endfor %}
    </table>

</div>

{% endblock %}
